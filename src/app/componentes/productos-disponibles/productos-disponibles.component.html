<div class="container mx-auto my-8 px-4">
  <h2 class="text-3xl font-bold text-blue-700 mb-6">Productos Disponibles</h2>

  <!-- Tabla de productos -->
  <div class="overflow-x-auto mb-8">
    <table class="min-w-full bg-white rounded-lg shadow-md divide-y divide-gray-200">
      <thead class="bg-blue-700 text-white">
        <tr>
          <th>ID</th>
          <th>Código</th>
          <th>Descripción</th>
          <th>Precio</th>
          <th>IVA incluido</th>
          <th>Precio c/IVA</th>
          <th>Cantidad</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of productos" class="hover:bg-gray-100 transition">
          <td>{{ p.producto_id }}</td>
          <td>{{ p.codigo }}</td>
          <td>{{ p.descripcion }}</td>
          <td>{{ p.precio | currency:'USD':'symbol':'1.2-2' }}</td>
          <td>{{ p.iva_incluido ? 'Sí' : 'No' }}</td>
          <td>{{ precioConIva(p) | currency:'USD':'symbol':'1.2-2' }}</td>
          <td>{{ p.cantidad }}</td>
          <td class="flex gap-2">
            <button (click)="editarProducto(p)" class="btn-blue">Editar</button>
            <button (click)="eliminarProducto(p.producto_id)" class="btn-red">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Formulario edición -->
  <div *ngIf="editando" class="bg-gray-50 p-6 rounded-lg shadow-md">
    <h3 class="text-2xl font-semibold text-blue-700 mb-4">Editar Producto</h3>
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
      <input type="text" [(ngModel)]="productoEditando!.codigo" name="codigo" placeholder="Código" class="input">
      <input type="text" [(ngModel)]="productoEditando!.descripcion" name="descripcion" placeholder="Descripción" class="input">
      <input type="number" [(ngModel)]="productoEditando!.precio" name="precio" placeholder="Precio" class="input">
      <label class="flex items-center gap-2">
        <input type="checkbox" [(ngModel)]="productoEditando!.iva_incluido" name="iva"> IVA incluido
      </label>
      <div class="md:col-span-4 flex gap-2 mt-2">
        <button (click)="guardarEdicion()" class="btn-blue">Guardar</button>
        <button (click)="cancelarEdicion()" class="btn-red">Cancelar</button>
      </div>
    </div>
  </div>
</div>
